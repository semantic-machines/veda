@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix v-s: <http://semantic-machines.com/veda/veda-schema/> .
@prefix v-ui: <http://semantic-machines.com/veda/veda-ui/> .
@prefix d: <http://semantic-machines.com/veda/veda-data/> .


<http://semantic-machines.com/veda/veda-contractorProfile-ui>
  rdf:type owl:Ontology ;
  rdfs:label "Онтология системы Veda. Досье контрагента. Интерфейс."@ru ;
  rdfs:label "Veda system ontology. ContractorProfile. UI."@en ;
  v-s:loadPriority 6 ;
.

# ------------------------------------------------------------ СПЕЦИФИКАЦИИ --

v-s:PsattachOrganizationProperties
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachOrganizationProperties;
  v-ui:tooltip "Реквизиты организации"@ru ;
  v-ui:tooltip "Organization properties"@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachCertificateRegistrationLegal
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachCertificateRegistrationLegal ;
  v-ui:tooltip "Свидетельство о государственной регистрации юридического лица. Свидетельство налогового (компетентного) органа (в соответствии с Соглашением об избежании двойного налогообложения) о регистрации контрагента в качестве налогоплательщика по месту нахождения его основной деятельности с проставленным апостилем и переводом на русский язык"@ru ;
  v-ui:tooltip "Certificate of state registration of legal entities"@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachCertificateTaxRegistration
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachCertificateTaxRegistration;
  v-ui:tooltip "Свидетельство о постановке на налоговый учет"@ru ;
  v-ui:tooltip "Certificate of tax registration"@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachExcerptFromEGRUL
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachExcerptFromEGRUL ;
  v-ui:tooltip "Выписка из ЕГРЮЛ (актуальная на момент формирования досье контрагента)"@ru ;
  v-ui:tooltip "Extract from EGRUL (correct at the time of formation of the dossier of the counterparty)"@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachDocSpecialTaxSystem
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachDocSpecialTaxSystem ;
  v-ui:tooltip "Сведения (письмо) о применении специальных налоговых режимов (ЕНВД, УСН и т.п.)"@ru ;
  v-ui:tooltip "Information about the application of special tax regimes."@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachAppointingOrder
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachAppointingOrder;
  v-ui:tooltip "Документы о назначении директора и главного бухгалтера"@ru ;
  v-ui:tooltip "Documents on the appointment of the director and chief accountant."@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachWarrant
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachWarrant;
  v-ui:tooltip "Документы (доверенности, приказы и др.), подтверждающие полномочия лиц на подписание договоров, счетов-фактур, ТТН (ТОРГ-12) и других документов с заверенными подписями лиц, уполномоченных на подписание документов"@ru ;
  v-ui:tooltip "Documents Confirming the authority of persons to sign contracts, invoices, TTN (TORG-12) and other documents with the certified signatures of the persons authorized to sign documents."@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachDocConfirmUseForestryEquipment
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachDocConfirmUseForestryEquipment;
  v-ui:tooltip "Документы, подтверждающие право собственности и/или пользования лесозаготовительной техникой для оказания услуг (паспорта самоходных машин, договор аренды, договор на оказание услуг и/или др.)"@ru ;
  v-ui:tooltip "Documents lesozagovitelnuyu technique."@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachDocConfirmUseWood
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachDocConfirmUseWood;
  v-ui:tooltip "Документы, подтверждающие право собственности на поставляемую лесопродукцию (договор купли-продажи лесных насаждений, договор аренды лесных участков)"@ru ;
  v-ui:tooltip "Documents for timber."@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachDocConfirmUseTransport
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachDocConfirmUseTransport;
  v-ui:tooltip "Документы, подтверждающие право собственности и/или пользования транспортными средствами для оказания услуг (ПТС на собственные и арендованные транспортные средства, договор аренды транспортных средств, договор на оказание услуг и/или др."@ru ;
  v-ui:tooltip "Documents the service."@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsttachSubcontractorInteraction
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachSubcontractorInteraction;
  v-ui:tooltip "Схема взаимодействия с субподрядчиками и т.п. третьими лицами, привлеченными контрагентом к выполнению договорных обязательств с описанием их функционала (письмо)."@ru ;
  v-ui:tooltip "Working with subcontractors scheme."@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachSubcontract
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachSubcontract;
  v-ui:tooltip "Договоры с субподрядчиками и т.п. третьими лицами, привлеченными контрагентом к выполнению договорных обязательств или  Реестр таких договоров с субподрядчиками, третьими лицами (с указанием наименования третьего лица, ИНН, юридического адреса, № и даты договора, вида работ, услуг)."@ru ;
  v-ui:tooltip "Subcontract."@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachDocConfirmUseAddresses
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachDocConfirmUseAddresses;
  v-ui:tooltip "Документы, подтверждающие основания для использования контрагентом юридического адреса, адреса фактического места нахождения (например, договор аренды и т.п.)"@ru ;
  v-ui:tooltip "Documents proving grounds for the counterparty of the legal address"@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachInsurancePayments
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachInsurancePayments;
  v-ui:tooltip "1-ый лист Расчета РСВ-1 ПФР  или  Сведения о среднесписочной численности работников  КНД 1110018  или иной аналогичный расчет, содержащий сведения о среднесписочной численности работников(на последнюю отчетную дату с отметкой ПФ РФ/налоговогооргана о получении)"@ru ;
  v-ui:tooltip "Calculation of insurance premiums to the Pension Fund of Russia"@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachTaxDeclaration
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachTaxDeclaration;
  v-ui:tooltip "Налоговые декларации по НДС на последнюю отчетную дату с отметкой налогового органа о получении"@ru ;
  v-ui:tooltip "Tax returns"@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachAccountBalance
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachAccountBalance;
  v-ui:tooltip "Бухгалтерский баланс и отчет о финансовых результатах на последнюю отчетную дату с отметкой налогового органа о получении"@ru ;
  v-ui:tooltip "Balance sheet"@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachTaxReport
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachTaxReport;
  v-ui:tooltip "Справка налогового органа о состоянии расчетов с бюджетом"@ru ;
  v-ui:tooltip "Help fiscal body on the status of settlements with the budget"@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachLicense
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachLicense;
  v-ui:tooltip "Лицензия или другой документ (например, Свидетельство СРО и т.п.), удостоверяющий право на осуществление данного вида деятельности (если деятельность подлежит лицензированию или иной форме регулирования)"@ru ;
  v-ui:tooltip "License"@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachSignatureSample
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachSignatureSample;
  v-ui:tooltip "Банковская карточка с образцами подписей."@ru ;
  v-ui:tooltip "Bank card with samples of signatures."@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachOrganizationProperties
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachOrganizationProperties;
  v-ui:tooltip "Свидетельство налогового (компетентного) органа (в соответствии с Соглашением об избежании двойного налогообложения) о регистрации контрагента в качестве налогоплательщика по месту нахождения его основной деятельности с проставленным апостилем и переводом на русский язык."@ru ;
  v-ui:tooltip "Details of the organization."@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PsattachOtherDoc
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:attachOtherDoc;
  v-ui:tooltip "Иные документы и сведения, предусмотренные пунктом 3.3 настоящей Инструкции."@ru ;
  v-ui:tooltip "Other documents."@en ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
.
v-s:PshasClassifierOKVED
  rdf:type v-ui:ObjectPropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:hasClassifierOKVED;
  v-ui:treeRoot  d:46f5101930b84318a2729e325a3bbe11;
  v-ui:treeRoot  d:db173864f36b40b6a8c0aa54698993e5;
  v-ui:treeRoot  d:e231e61f533d4efca26f8f4dcb89d526;
  v-ui:treeRoot  d:03b99870220c4298bbb5205d4baef223;
  v-ui:treeRoot  d:2bfd5785f27d404d91f9ea0c6776be0b;
  v-ui:treeRoot  d:a6cbc433502a435facc0101d3011dd57;
  v-ui:treeRoot  d:de3025d1094c462583c2768330138016;
  v-ui:treeRoot  d:7d5ed218d3594d1bad1c795b4dd5b72c;
  v-ui:treeRoot  d:a6481e4b18a649faac50e06a041b7c6e;
  v-ui:treeRoot  d:2bf1c3d5d7c24c00b9d21a316f593d59;
  v-ui:treeRoot  d:750324185e0f4754a3a166c7477c025d;
  v-ui:treeRoot  d:c3faddd518fb4fe1b7239c5b77c3ebae;
  v-ui:treeRoot  d:8e847f9c954a41ad91ce75a1b9fe5965;
  v-ui:treeRoot  d:82e994b8848c40fe8b649acffff1ff06;
  v-ui:treeRoot  d:f2fed1092af94be484fb7f9fd72c765c;
  v-ui:treeRoot  d:ede091781b2f4cb6bfaadbd9f13be0e0;
  v-ui:treeRoot  d:69291c45bd304e6f8203f9ef2a6a1f77;
  v-ui:treeRoot  d:a96a921db73d4d6aa80a7f51ca0a4789;
  v-ui:treeRoot  d:570d8b83f2604204834bbe0f724ad1fe;
  v-ui:treeRoot  d:7f654ba3a8b041f3a928aca9985a9029;
  v-ui:treeRoot  d:fb77ef1adefc41769b9f4bdb6d6124a2;
  v-ui:treeInProperty v-s:hasParentLink ;
  v-ui:treeAllowedClass v-s:ClassifierOKVED ;
  v-ui:treeSelectableClass v-s:ClassifierOKVED ;
  v-ui:treeDisplayedProperty rdfs:label ;
  v-ui:treeDisplayedProperty v-s:registrationNumber ;
  v-ui:minCardinality 0 ;
  v-ui:maxCardinality 100 ;
  v-ui:placeholder "Выберите вид деятельности ОКВЭД"@ru ;
  v-ui:placeholder "Select the type of activity OKVED"@en ;
 .
v-s:PsContractorProfileMailbox
  rdf:type v-ui:ObjectPropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:mailbox ;
  v-ui:tooltip "E-mail генерального директора или руководителя финансовой службы."@ru ;
  v-ui:tooltip "E-mail the general manager or head of finance department"@en ;
  rdfs:label "Спецификация к свойству v-s:mailbox для класса v-s:ContractorProfile"@ru ;
  rdfs:label "Spec for property v-s:mailbox for class v-s:ContractorProfile"@en ;
.
v-s:PshasClassifierCountry
  rdf:type v-ui:PropertySpecification ;
  v-ui:forClass v-s:ContractorProfile ;
  v-ui:forProperty v-s:hasClassifierCountry;
  v-ui:forProperty v-s:hasClassifierLegalForm;
  v-ui:forProperty v-s:isDirectManufacturer;
  v-ui:forProperty v-s:isSpecialTax;
  v-ui:minCardinality 1 ;
  v-ui:maxCardinality 1 ;
 .
#--------------Строки--------------------------------------

v-s:AddOKVEDName
  rdf:type v-s:Bundle ;
  rdfs:label "Возможные виды деятельности компании по выписке из ЕГРЮЛ"@ru ;
  rdfs:label "Possible activities of the company"@en ;
.
v-s:AddOKVEDNameCoordinated
  rdf:type v-s:Bundle ;
  rdfs:label "Согласованние видов деятельности компании"@ru ;
  rdfs:label "Coordinated activities of the company"@en ;
.
v-s:AddOKVEDNameRequested
  rdf:type v-s:Bundle ;
  rdfs:label "Проверяемые виды деятельности для Mondi, включая субподряд"@ru ;
  rdfs:label "Coordinated activities of the company"@en ;
.
v-s:AddRegistrNamberReestr
  rdf:type v-s:Bundle ;
  rdfs:label "Регистрационный номер контрагента"@ru ;
  rdfs:label "Registration number of the counterparty"@en ;
.
v-s:AddDateactions
  rdf:type v-s:Bundle ;
  rdfs:label "Период действия документа"@ru ;
  rdfs:label "The period of validity of the document"@en ;
.
#-------------Template-------------------------
v-s:ContractorProfileTemplate
  rdf:type v-ui:ClassTemplate ;
  v-ui:forClass v-s:ContractorProfile ;
  rdfs:label "Шаблон для класса v-s:ContractorProfile"@ru ;
  rdfs:label "Template for v-s:ContractorProfile class"@en ;
  v-ui:template """
<script>
  var props = [
    "v-s:attachOrganizationProperties",
    "v-s:attachCertificateRegistrationLegal",
    "v-s:attachExcerptFromEGRUL",
    "v-s:attachCertificateTaxRegistration",
    "v-s:attachAppointingOrder",
    "v-s:attachWarrant",
    "v-s:attachSignatureSample",
    "v-s:attachLicense",
    "v-s:attachTaxReport",
    "v-s:attachAccountBalance",
    "v-s:attachTaxDeclaration",
    "v-s:attachDocConfirmUseAddresses",
    "v-s:attachDocSpecialTaxSystem",
    "v-s:attachInsurancePayments",
    "v-s:attachSubcontract",
    "v-s:attachSubcontractorInteraction",
    "v-s:attachDocConfirmUseTransport",
    "v-s:attachDocConfirmUseWood",
    "v-s:attachDocConfirmUseForestryEquipment",
    "v-s:attachOtherDoc"
  ];
  var files = $(".files", template),
      relNameTmpl = $(".rel-name", template).get(0).outerHTML,
      relValueTmpl = $(".rel-value", template).get(0).outerHTML;
  $(".rel-name, .rel-value", template).remove();
  props.map(function (property_uri) {
    var relName = $(relNameTmpl);
    relName.find("strong").attr("about", property_uri);
    relName.find("veda-control").attr("rel", property_uri);
    var relValue = $(relValueTmpl).attr("rel", property_uri);
    files.append(relName, relValue);
  });

  //# sourceURL=v-s:ContractorProfileTemplate_pre
</script>
<div class="container sheet">
   <h2>
    <span about="v-s:ContractorProfile" property="rdfs:label"></span>
    <small about="@" property="rdfs:label"></small>
  </h2>
  <span about="@" data-template="v-ui:RabbitHole"></span>
  <hr>
  <br>
  <div>
    <div about="@" rel="v-s:backwardTarget">
      <span>
        <span about="@" data-template="v-ui:IconModalTemplate"></span>
        <span about="@" data-template="v-ui:ClassNameLabelTemplate"></span>
      </span>
    </div>
  </div>
  <br>
  <table class="table table-bordered">
    <thead class="result-header">
      <tr>
        <th  colspan="5" about="v-s:ContractorCategoryRequest" property="rdfs:label"></th>
      </tr>
      <tr class="active">
        <th width="1%"><span class="glyphicon glyphicon-search"></span></th>
        <th about="v-s:hasContractorInteractionCategory" property="rdfs:label"></th>
        <th about="v-s:date" property="rdfs:label"></th>
        <th about="v-s:isOrganizationOk" property="rdfs:label"></th>
      </tr>
    </thead>
    <tbody rel="v-s:hasContractorCategoryRequest" >
      <tr>
        <td width="1%"><a href="#/@" class="glyphicon glyphicon-search"></a></td>
        <td width="50%">
          <div about="@" rel="v-s:hasContractorInteractionCategory" class="view -edit -search" data-template="v-ui:LabelTemplate"></div>
        </td>
        <td width="20%" rel="v-s:hasContractorCategoryDecision">
          <div>
            <div property="v-s:date" class="view -edit -search"></div>
          </div>
        </td>
        <td width="30%" rel="v-s:hasContractorCategoryDecision">
          <div>
            <veda-control  property="v-s:isOrganizationOk" data-type="boolean"></veda-control>
          </div>
          <script>
              if( individual.hasValue("v-s:isOrganizationOk", true) ) {
                template.closest("tr").addClass("success");
              } else if ( individual.hasValue("v-s:isOrganizationOk", false) ) {
                template.closest("tr").addClass("danger");
              } else {
                template.closest("tr").addClass("warning");
              }
          </script>
        </td>
      </tr>
    </tbody>
  </table>
  <div class="view -edit -search clearfix">
    <button class="btn btn-success pull-right" id="add-contractorCategoryRequest" >
      <span class="glyphicon glyphicon-search"></span>
      <span about="v-s:ContractorCategoryRequest" property="rdfs:label"></span>
    </button>
  </div>
  <br>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th colspan="3" about="v-s:AddOKVEDName" property="rdfs:label"></th>
      </tr>
      <tr class="active">
        <th about="rdfs:label" property="rdfs:label"></th>
        <th about="v-s:description" property="rdfs:label"></th>
        <th about="v-s:registrationNumber" property="rdfs:label"></th>
      </tr>
    </thead>
    <tbody rel="v-s:hasClassifierOKVED">
      <tr>
        <td property="rdfs:label" class="view edit -search"></td>
        <td property="v-s:description" class="view edit -search"></td>
        <td property="v-s:registrationNumber" class="view edit -search"></td>
      </tr>
    </tbody>
    <tfoot class="-view edit -search"><tr><td colspan="3">
      <br>
        <veda-control data-type="link" rel="v-s:hasClassifierOKVED" class="-view edit search fulltext tree"></veda-control>
    </td></tr></tfoot>
  </table>

  <div class="checkbox">
    <label>
      <veda-control property="v-s:isDirectManufacturer" data-type="boolean"></veda-control>
      <em about="v-s:isDirectManufacturer" property="rdfs:label"></em>
    </label>
  </div>
  <div class="checkbox">
    <label>
      <veda-control property="v-s:isSpecialTax" data-type="boolean"></veda-control>
      <em about="v-s:isSpecialTax" property="rdfs:label"></em>

    </label>
  </div>

  <em about="v-s:organizationProperties" property="rdfs:label"></em>
  <div property="v-s:organizationProperties" class="view -edit -search"></div>
  <veda-control data-type="text" property="v-s:organizationProperties" class="-view edit search"></veda-control>

  <em about="v-s:contactInfo" property="rdfs:label"></em>
  <div property="v-s:contactInfo" class="view -edit -search"></div>
  <veda-control data-type="text" property="v-s:contactInfo" class="-view edit search"></veda-control>
  <div class="row">
    <div class="col-md-4">
      <em about="v-s:mailbox" property="rdfs:label"></em>
      <div property="v-s:mailbox" class="view -edit -search"></div>
      <veda-control data-type="string" property="v-s:mailbox" class="-view edit search"></veda-control>
    </div>
    <div class="col-md-4">
      <em about="v-s:phone" property="rdfs:label"></em>
      <div property="v-s:phone" class="view -edit -search"></div>
      <veda-control data-type="string" property="v-s:phone" class="-view edit search"></veda-control>
    </div>
    <div class="col-md-4">
      <em about="v-s:fax" property="rdfs:label"></em>
      <div property="v-s:fax" class="view -edit -search"></div>
      <veda-control data-type="string" property="v-s:fax" class="-view edit search"></veda-control>
    </div>
  </div>
  <br>
  <table class="table table-bordered files">
    <thead>
      <tr>
        <th rowspan="2" width="30%" about="v-s:fileName" property="rdfs:label"></th>
        <th rowspan="2" width="20%" about="rdfs:comment" property="rdfs:label"></th>
        <th colspan="2" width="20%" about="v-s:AddDateactions" property="rdfs:label"></th>
        <th rowspan="2" width="20%" about="v-s:creator" property="rdfs:label"></th>
      </tr>
      <tr>
        <th  width="15%" about="v-s:dateFrom" property="rdfs:label"></th>
        <th  width="15%" about="v-s:dateTo" property="rdfs:label"></th>
      </tr>
    </thead>
    <tbody class="rel-name">
      <tr class="active">
        <td colspan="5">
          <strong about="" property="rdfs:label"></strong>
          <veda-control style="display:inline-block;margin-left:10px" rel="" data-type="file" class="-view edit -search"></veda-control>
        </td>
      </tr>
    </tbody>
    <tbody class="rel-value" rel="" data-embedded="true">
      <tr>
        <td>
          <span id="icon" class="label label-primary"></span>
          <a href="/files/@">
            <span about="@" property="v-s:fileName"></span>
          </a>
        </td>
        <td>
          <span property="rdfs:comment" class="view -edit -search"></span>
          <veda-control data-type="string" property="rdfs:comment" class="-view edit search"></veda-control>
        </td>
        <td>
          <div property="v-s:dateFrom" class="view -edit -search"></div>
          <veda-control property="v-s:dateFrom" data-type="dateTime" class="-view edit search"></veda-control>
        </td>
        <td>
          <div property="v-s:dateTo" class="view -edit -search"></div>
          <veda-control property="v-s:dateTo" data-type="dateTime" class="-view edit search"></veda-control>
        </td>
        <td><span about="@" rel="v-s:creator" data-template="v-ui:LabelTemplate"></span> <span about="@" property="v-s:created"></span></td>
      </tr>
      <script>
        var fn = individual["v-s:fileName"][0],
          idx = fn.lastIndexOf("."),
          ext = fn.substr(idx + 1);
        $("span#icon", template).text(ext);
        //# sourceURL=v-s:ContractorProfileFileTemplate
      </script>
    </tbody>
  </table>

  <hr>
  <div about="@" data-template="v-ui:SystemPropertiesTemplate" data-embedded="true"></div>
  <br>
  <!-- BUTTONS -->
  <div class="actions">
    <span about="@" data-template="v-ui:StandardButtonsTemplate" data-embedded="true" data-buttons="edit save cancel delete journal journal-dms task"></span>
  </div>
</div>
<script>
  $("#add-contractorCategoryRequest", template).click(function () {
    var _class = new veda.IndividualModel("v-s:ContractorCategoryRequest"),
        request = new veda.IndividualModel(),
        tmpl = "v-s:ContractorCategoryRequestTemplate";
    request["rdf:type"] = [_class];
    request["v-s:backwardTarget"] = [individual];
    request["v-s:backwardProperty"] = [new veda.IndividualModel("v-s:hasContractorCategoryRequest")];
    request["v-s:canRead"] = [ true ];
    riot.route( ["#", request.id, "#main", tmpl, "edit"].join("/") );
  });
  //# sourceURL=v-s:ContractorProfileTemplate_post
</script>
  """ ;
.

v-s:ContractorCategoryRequestTemplate
  rdf:type v-ui:ClassTemplate ;
  v-ui:forClass v-s:ContractorCategoryRequest ;
  rdfs:label "Шаблон для класса v-s:ContractorCategoryRequest"@ru ;
  rdfs:label "Template for v-s:ContractorCategoryRequest class"@en ;
  v-ui:template """
<script>
  var hideAndshowsubContractorOf = $("#hideAndshowsubContractorOf", template);

  individual.on("v-s:hasContractorInteractionCategory", handler);
  template.one("remove", function () {
    individual.off("v-s:hasContractorInteractionCategory", handler);
  });
  function handler() {
    if ((individual.hasValue('v-s:hasContractorInteractionCategory') && individual['v-s:hasContractorInteractionCategory'][0].id === 'd:eb16f1abb93f44d89ae0492710ad4631')) {
      hideAndshowsubContractorOf.show();
    } else {
      hideAndshowsubContractorOf.hide();
    }
  }
  handler();
  //кнопка активна если итоговая оценка отрицательная
  if ( individual.hasValue("v-s:hasContractorCategoryDecision") && individual["v-s:hasContractorCategoryDecision"][0]["v-s:isOrganizationOk"][0] === false ) {
    $(".action#save_and_start_process2", template).removeAttr("disabled");
  } else {
    $(".action#save_and_start_process2", template).attr("disabled", "disabled");
  }
</script>
<div>
  <div class="container sheet">
    <div class="row">
      <div class ="col-md-9 col-sm-7">
        <h2>
          <span about="v-s:ContractorCategoryRequest" property="rdfs:label"></span><br>
          <small about="@" property="rdfs:label"></small>
        </h2>
      <span about="@" data-template="v-ui:RabbitHole"></span>
      </div>
      <div class="col-md-3 col-sm-5">
        <br>
        <h4>
          <span class="label label-danger">
            <span about="v-s:contractorCategory" property="rdfs:label"></span>:
            <span about="@" property="v-s:contractorCategory"></span>
          </span>
        </h4>
      </div>
    </div>

    <hr class="margin-sm">
    <div class="row">
      <div class="col-md-9 col-sm-7">
        <em about="v-s:hasContractorInteractionCategory" property="rdfs:label"></em>
        <div rel="v-s:hasContractorInteractionCategory" class="view -edit search" data-template="v-ui:LabelTemplate"></div>
        <veda-control data-type="link" rel="v-s:hasContractorInteractionCategory" class="-view edit search fulltext dropdown"></veda-control>
        <br>
        <div id="hideAndshowsubContractorOf">
          <br>
          <table class="table table-bordered">
            <thead class="result-header">
              <tr>
                <th  colspan="3" about="v-s:subContractorOf" property="rdfs:label"></th>
              </tr>
              <tr class="active">
                <th about="rdfs:label" property="rdfs:label"></th>
                <th about="v-s:taxId" property="rdfs:label"></th>
                <th about="v-s:legalAddress" property="rdfs:label"></th>
              </tr>
            </thead>
            <tbody rel="v-s:subContractorOf" >
              <tr>
                <td>
                  <div about="@" property="rdfs:label" class="view -edit -search" data-template="v-ui:LabelTemplate"></div>
                </td>
                <td>
                  <div about="@" property="v-s:taxId" class="view -edit -search" data-template="v-ui:LabelTemplate"></div>
                </td>
                <td>
                  <div>
                    <div property="v-s:legalAddress" class="view -edit -search"></div>
                  </div>
                </td>
              </tr>
            </tbody>
            <tfoot class="-view edit -search"><tr><td colspan="3">
              <br>
              <veda-control data-type="link" rel="v-s:subContractorOf" class="-view edit search fulltext"></veda-control>
            </td></tr></tfoot>
          </table>
        </div>

        <em about="v-s:expectedValueOfContract" class="view edit -search" property="rdfs:label"></em>
        <div about="@" rel="v-s:expectedValueOfContract" class="view edit -search" data-template="v-s:PriceTemplate" data-embedded="true"></div>
        <veda-control data-type="link" rel="v-s:expectedValueOfContract" class="-view edit -search create"></veda-control>

        <em about="rdfs:comment" property="rdfs:label"></em>
        <div property="rdfs:comment" class="view -edit -search"></div>
        <veda-control data-type="text" property="rdfs:comment" class="-view edit search"></veda-control>
      </div>
      <div class="col-md-3 col-sm-5">
        <br>
        <div rel="v-s:hasContractorCategoryDecision"  data-template="v-s:ContractorCategoryDecisionEmbeddedTemplate"></div>
        <div id="new-ContractorCategoryDecision" class="view -edit -search clearfix">
          <button class="btn btn-success pull-right" id="add-ContractorCategoryDecision">
            <span class="glyphicon glyphicon-zoom-in"></span>
            <span about="v-s:ContractorCategoryDecision" property="rdfs:label"></span>
          </button>
        </div>
      </div>
    </div>
    <hr>
    <div about="@" rel="v-s:backwardTarget" data-embedded="true" data-template="v-s:DosieEmbeddedTemplate"></div>

    <hr>
    <div about="@" data-template="v-ui:SystemPropertiesTemplate" data-embedded="true"></div>
    <br>
    <!-- BUTTONS -->
    <div class="actions">
      <span about="@" data-template="v-ui:StandardButtonsTemplate" data-embedded="true" data-buttons="edit save cancel delete journal journal-dms task"></span>
    </div>
  </div>
  <br>
  <div about="@" class="container sheet view edit -search" data-template="v-s:LinksTemplate" data-embedded="true"></div>
  <br>
  <div about="@" class="container sheet view -edit -search" data-template="v-s:CommentsTemplate"></div>
</div>
<script>
  $("#add-ContractorCategoryDecision", template).click(function () {
    var modal = $("#notification-modal-template").html();
    modal = $(modal);
    modal.modal({"show": false});
    $("body").append(modal);
    modal.modal("show");
    template.one("remove", function () {
      modal.modal("hide").remove();
    });
    var cntr = $(".modal-body", modal),
        _class = new veda.IndividualModel("v-s:ContractorCategoryDecision"),
        decision = new veda.IndividualModel(),
        tmpl = new veda.IndividualModel("v-s:ContractorCategoryDecisionTemplate");
    decision["rdf:type"] = [_class];
    decision["v-s:backwardTarget"] = [individual];
    decision["v-s:backwardProperty"] = [new veda.IndividualModel("v-s:hasContractorCategoryDecision")];
    decision["v-s:canRead"] = [ true ];
    decision.present(cntr, tmpl, "edit");
    decision.one("beforeReset", function () {
      modal.modal("hide").remove();
    });
    decision.one("afterSave", function () {
      modal.modal("hide").remove();
    });
  });

  var _class = new veda.IndividualModel("v-s:ContractorCategoryDecision");
  var hasRights = _class.rights.hasValue("v-s:canCreate", true);

  individual.on("v-s:hasContractorCategoryDecision", handler);
  template.one("remove", function () {
    individual.off("v-s:hasContractorCategoryDecision", handler);
  });
  function handler() {
    if (!hasRights) {
      $("#add-ContractorCategoryDecision", template).prop("disabled", true);
    }
    if(individual.hasValue("v-s:hasContractorCategoryDecision")){
      $("#add-ContractorCategoryDecision", template).hide();
    } else {
        $("#add-ContractorCategoryDecision", template).show();
      }
  }
  handler();

  individual.on("afterReset", processHandler);
  processHandler();
  template.one("remove", function () {
     individual.off("afterReset", processHandler);
  });

  //# sourceURL=v-s:ContractorCategoryRequestTemplate
</script>
    """ ;
.

v-s:PriceTemplate
  rdf:type v-ui:ClassTemplate ;
  rdfs:label "Шаблон для класса v-s:Price внутри v-s:ContractorCategoryRequest"@ru ;
  rdfs:label "Template for v-s:Price class in v-s:ContractorCategoryRequest"@en ;
  v-ui:template """
<div class="panel panel-default">
  <div class="panel-body">
    <div class="row">
      <div class="col-md-3">
        <em about="v-s:sum" property="rdfs:label" class="margin-sm"></em>
        <span property="v-s:sum" class="view -edit search"></span>
        <veda-control data-type="decimal" property="v-s:sum" class="-view edit search"></veda-control>
      </div>
      <div class="col-md-3">
        <em about="v-s:hasCurrency" property="rdfs:label" class="margin-sm"></em>
        <span rel="v-s:hasCurrency" class="view -edit search" data-template="v-ui:LabelTemplate"></span>
        <veda-control data-type="link" rel="v-s:hasCurrency" class="-view edit search fulltext dropdown"></veda-control>
      </div>
      <div class="col-md-3 view edit -search">
        <em about="v-s:sumRuble" property="rdfs:label" class="margin-sm"></em>
        <span about="@" property="v-s:sumRuble" class="view edit -search"></span>
      </div>
      <div class="col-md-3 view edit -search">
        <em about="v-s:date" property="rdfs:label" class="margin-sm"></em>
        <span about="@" property="v-s:date" class="view edit -search"></span>
      </div>
    </div>
  </div>
</div>
<script>
  individual.on("propertyModified", handler);
  template.one("remove", function () {
    individual.off("propertyModified", handler);
  });

  function handler(property_uri) {
    if ( (property_uri === "v-s:sum" || property_uri === "v-s:hasCurrency") && (individual.hasValue("v-s:sum") && individual.hasValue("v-s:hasCurrency")) ) {
      var CER_uri = query({
        ticket: veda.ticket,
        query: "'rdf:type'==='v-s:CurrencyExchangeRate' && 'v-s:hasCurrencySource'=='" + individual["v-s:hasCurrency"][0].id + "' && 'v-s:hasCurrencyTarget'=='d:currency_rub' && 'v-s:hasCurrencyExchangeRatePurpose'=='v-s:CER_Purpose_current'",
        sort: "'v-s:date' asc",
        top: 1,
        async: true
      }).then(function (result) {
        var CER_uri = result.result[0];
        if (CER_uri) {
          var CER = new veda.IndividualModel(CER_uri);
          var rate = CER["v-s:rate"][0];
          individual["v-s:sumRuble"] = [ individual["v-s:sum"][0] * rate ];
          individual["v-s:date"] = [ new Date() ];
        } else {
          individual["v-s:sumRuble"] = [];
          individual["v-s:date"] = [];
        }
      });
    }
  }

  //# sourceURL=v-s:PriceTemplate_post
</script>
  """ ;
.

v-s:DosieEmbeddedTemplate
  rdf:type v-ui:ClassTemplate ;
  rdfs:label "Вложенный шаблон для класса v-s:ContractorCategoryRequest"@ru ;
  rdfs:label "Template embedded for v-s:ContractorCategoryRequest class"@en ;
  v-ui:template """
<script>
  var props = [
    "v-s:attachOrganizationProperties",
    "v-s:attachCertificateRegistrationLegal",
    "v-s:attachExcerptFromEGRUL",
    "v-s:attachCertificateTaxRegistration",
    "v-s:attachAppointingOrder",
    "v-s:attachWarrant",
    "v-s:attachSignatureSample",
    "v-s:attachLicense",
    "v-s:attachTaxReport",
    "v-s:attachAccountBalance",
    "v-s:attachTaxDeclaration",
    "v-s:attachDocConfirmUseAddresses",
    "v-s:attachDocSpecialTaxSystem",
    "v-s:attachInsurancePayments",
    "v-s:attachSubcontract",
    "v-s:attachSubcontractorInteraction",
    "v-s:attachDocConfirmUseTransport",
    "v-s:attachDocConfirmUseWood",
    "v-s:attachDocConfirmUseForestryEquipment",
    "v-s:attachOtherDoc"
  ];
  var files = $(".files", template),
      relNameTmpl = files.children(".rel-name").remove(),
      relValueTmpl = files.children(".rel-value").remove();
  props.map(function (property_uri) {
    var relName = relNameTmpl.clone();
    relName.find("strong").attr("about", property_uri);
    relName.find("veda-control").attr("rel", property_uri);
    var relValue = relValueTmpl.clone().attr("rel", property_uri);
    files.append(relName, relValue);
  });

  // VALIDATION
  var categories = {
    1: [
      "v-s:attachCertificateRegistrationLegal"
    ],
    2: [
      "v-s:attachCertificateRegistrationLegal"
    ],
    3: [
      "v-s:attachCertificateRegistrationLegal",
      "v-s:attachCertificateTaxRegistration",
      "v-s:attachExcerptFromEGRUL",
      "v-s:attachAppointingOrder",
      "v-s:attachWarrant"
    ],
    4: [
      "v-s:attachCertificateRegistrationLegal",
      "v-s:attachCertificateTaxRegistration",
      "v-s:attachExcerptFromEGRUL",
      "v-s:attachAppointingOrder",
      "v-s:attachWarrant",
      "v-s:attachTaxReport",
      "v-s:attachAccountBalance",
      "v-s:attachInsurancePayments",
      "v-s:attachDocConfirmUseAddresses",
      "v-s:attachDocSpecialTaxSystem",

    ],
    5: [
      "v-s:attachCertificateRegistrationLegal",
      "v-s:attachCertificateTaxRegistration",
      "v-s:attachExcerptFromEGRUL",
      "v-s:attachAppointingOrder",
      "v-s:attachWarrant",
      "v-s:attachTaxReport",
      "v-s:attachAccountBalance",
      "v-s:attachInsurancePayments",
      "v-s:attachDocConfirmUseAddresses",

    ],
    6: [],
    7: [],
    s1: [
      "v-s:attachDocConfirmUseTransport"
    ],
    s2: [
      "v-s:attachDocConfirmUseWood",
      "v-s:attachDocConfirmUseForestryEquipment"
    ],

  };

  template.on("validate", function () {
    var result = {};
    if ( individual.hasValue("v-s:lastContractorCategory") ) {
      var category = categories[ individual["v-s:lastContractorCategory"][0] ];
      category.reduce(function (acc, property_uri) {
        acc.state = ( typeof acc.state === "undefined" ? true : acc.state );
        acc[property_uri] = checkMinCardinality(property_uri);
        return acc;
      }, result);
    }
    if (individual.hasValue("v-s:dateFromFact") && individual["v-s:dateFromFact"][0].getFullYear() === (new Date()).getFullYear()) {
      result["v-s:attachAccountBalance"] = {
        state: true,
        cause: []
      };
    }
    if ( individual.hasValue("v-s:lastContractorCategorySpecial") ) {
      var special_category = [];
      if (individual["v-s:lastContractorCategorySpecial"][0] & 1) {
        special_category = special_category.concat(categories.s1);
      }
      if (individual["v-s:lastContractorCategorySpecial"][0] & 2) {
        special_category = special_category.concat(categories.s2);
      }
      special_category.reduce(function (acc, property_uri) {
        acc.state = ( typeof acc.state === "undefined" ? true : acc.state );
        acc[property_uri] = checkMinCardinality(property_uri);
        return acc;
      }, result);
    }
    template.trigger("validated", result);
  });

  function checkMinCardinality (property_uri) {
    var state = individual.hasValue(property_uri);
    var cause = ["v-ui:minCardinality"];
    return {state: state, cause: cause};
  }

  //# sourceURL=v-s:DosieEmbeddedTemplate_pre
</script>
<div>
  <h2>
    <span about="v-s:ContractorProfile" property="rdfs:label"></span>
    <small about="@" property="rdfs:label"></small>
  </h2>
  <br>
  <div>
    <span about="@" rel="v-s:backwardTarget" data-template="v-ui:IconModalTemplate"></span> <span about="@" rel="v-s:backwardTarget" data-template="v-ui:ClassNameLabelTemplate"></span>
  </div>
  <br class="view -edit -search">
  <table class="table table-bordered">
    <thead>
      <tr>
        <th colspan="3" about="v-s:AddOKVEDName" property="rdfs:label"></th>
      </tr>
      <tr class="active">
        <th about="rdfs:label" property="rdfs:label"></th>
        <th about="v-s:description" property="rdfs:label"></th>
        <th about="v-s:registrationNumber" property="rdfs:label"></th>
      </tr>
    </thead>
    <tbody rel="v-s:hasClassifierOKVED" >
      <tr>
        <td property="rdfs:label" class="view edit -search"></td>
        <td property="v-s:description" class="view edit -search"></td>
        <td property="v-s:registrationNumber" class="view edit -search"></td>
      </tr>
    </tbody>
    <tfoot><tr><td colspan="3">
      <veda-control data-type="link" rel="v-s:hasClassifierOKVED" class="-view edit search fulltext" data-template="{individual['v-s:registrationNumber'][0] + ' - ' + individual['rdfs:label'][0]}"></veda-control>
    </td></tr></tfoot>
  </table>
  <em about="v-s:LegalEntityExistencePeriodBundle" property="rdfs:label"></em>
  <div class="row">
    <div class="col-md-3">
      <div property="v-s:dateFromFact" class="view -edit -search"></div>
      <veda-control property="v-s:dateFromFact" data-type="dateTime" class="-view edit search"></veda-control>
    </div>
    <div class="col-md-3">
      <div property="v-s:dateToFact" class="view -edit -search"></div>
      <veda-control property="v-s:dateToFact" data-type="dateTime" class="-view edit search"></veda-control>
    </div>
  </div>
  <br>
  <em about="v-s:organizationProperties" property="rdfs:label"></em>
  <div property="v-s:organizationProperties" class="view -edit -search"></div>
  <veda-control data-type="text" property="v-s:organizationProperties" class="-view edit search"></veda-control>

  <em about="v-s:contactInfo" property="rdfs:label"></em>
  <div property="v-s:contactInfo" class="view -edit -search"></div>
  <veda-control data-type="text" property="v-s:contactInfo" class="-view edit search"></veda-control>
  <div class="row">
    <div class="col-md-4">
      <em about="v-s:mailbox" property="rdfs:label"></em>
      <div property="v-s:mailbox" class="view -edit -search"></div>
      <veda-control data-type="string" property="v-s:mailbox" class="-view edit search"></veda-control>
    </div>
    <div class="col-md-4">
      <em about="v-s:phone" property="rdfs:label"></em>
      <div property="v-s:phone" class="view -edit -search"></div>
      <veda-control data-type="string" property="v-s:phone" class="-view edit search"></veda-control>
    </div>
    <div class="col-md-4">
      <em about="v-s:fax" property="rdfs:label"></em>
      <div property="v-s:fax" class="view -edit -search"></div>
      <veda-control data-type="string" property="v-s:fax" class="-view edit search"></veda-control>
    </div>
  </div>
  <br>
  <table class="table table-bordered files">
    <thead>
      <tr>
        <th rowspan="2" width="30%" about="v-s:fileName" property="rdfs:label"></th>
        <th rowspan="2" width="20%" about="rdfs:comment" property="rdfs:label"></th>
        <th colspan="2" width="20%" about="v-s:AddDateactions" property="rdfs:label"></th>
        <th rowspan="2" width="20%" about="v-s:creator" property="rdfs:label"></th>
      </tr>
      <tr>
        <th  width="15%" about="v-s:dateFrom" property="rdfs:label"></th>
        <th  width="15%" about="v-s:dateTo" property="rdfs:label"></th>
      </tr>
    </thead>
    <tbody class="rel-name">
      <tr class="active">
        <td colspan="5">
          <strong about="" property="rdfs:label"></strong>
          <veda-control style="display:inline-block;margin-left:10px" rel="" data-type="file" class="-view edit -search"></veda-control>
        </td>
      </tr>
    </tbody>
    <tbody class="rel-value" rel="" data-embedded="true">
      <tr>
        <td>
          <span id="icon" class="label label-primary"></span>
          <a href="/files/@">
            <span about="@" property="v-s:fileName"></span>
          </a>
        </td>
        <td>
          <span property="rdfs:comment" class="view -edit -search"></span>
          <veda-control data-type="string" property="rdfs:comment" class="-view edit search"></veda-control>
        </td>
        <td>
          <div property="v-s:dateFrom" class="view -edit -search"></div>
          <veda-control property="v-s:dateFrom" data-type="dateTime" class="-view edit search"></veda-control>
        </td>
        <td>
          <div property="v-s:dateTo" class="view -edit -search"></div>
          <veda-control property="v-s:dateTo" data-type="dateTime" class="-view edit search"></veda-control>
        </td>
        <td><span about="@" rel="v-s:creator" data-template="v-ui:LabelTemplate"></span> <span about="@" property="v-s:created"></span></td>
      </tr>
      <script>
        var fn = individual["v-s:fileName"][0],
          idx = fn.lastIndexOf("."),
          ext = fn.substr(idx + 1);
        $("span#icon", template).text(ext);
        //# sourceURL=v-s:ContractorProfileFileTemplate
      </script>
    </tbody>
  </table>
</div>
<script>
  $('#save_and_start_process', template).on('click', function () {
     veda.Util.send(individual, template, 's-wf:complexRouteTransform');
  });

  //# sourceURL=v-s:DosieEmbeddedTemplate_post
</script>

    """ ;
.
