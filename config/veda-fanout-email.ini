# Example config for veda-fanout-email retry

[retry]
# Enable or disable retry logic
enabled = true

# If true, retry only SMTP transient errors
retry_on_transient_only = true

# First retry delay.
# Examples: 1m, 30s
base_delay = 1m

# Max retry delay (exponential backoff cap).
# Examples: 1h, 30m
max_delay = 3h

# Max retry attempts per email
max_attempts = 6

# Max total retry window.
# Examples: 2d, 1d5h2m1s
max_total = 5h2m1s

# How often heartbeat checks pending file.
# Examples: 5s, 1m
heartbeat_check = 5s

[retry_storage]
# File with pending retries (JSONL)
pending_file_path = ./data/email-retry-pending.jsonl

# File with exhausted/invalid records (JSONL)
dead_letter_file_path = ./data/email-retry-dead-letter.jsonl

# Temp file for atomic pending rewrite
temp_file_path = ./data/email-retry-pending.tmp

# Max single JSONL line size
max_record_size_bytes = 1048576

# Max records allowed in pending file
max_pending_records = 10000
